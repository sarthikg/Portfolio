---
import Card from "@component/card/Card.astro";
import HorizontalCard from "@component/horizontal-card/HorizontalCard.astro";
import Section from "@component/section/Section.astro";
import Layout from "@layout/layout/Layout.astro";
import "@style/pages/articles.css";

import {
  getAllFeaturedArticles,
  getAllPublishedArticles,
} from "@facade/article";
import { getPageInfo } from "@facade/page-info";

const pageInfo = await getPageInfo("articles");
const allArticles = await getAllPublishedArticles();
const allFeaturedArticles = await getAllFeaturedArticles();
---

<Layout title="Articles // Sarthik Gupta">
  <main class="main main--articles">
    <h1 class="articles__heading">{pageInfo.data.title}</h1>
    <p class="articles__heading__description">
      {pageInfo.data.description}
    </p>
    <Section title="Featured Articles">
      <div class="articles__featured">
        {
          allFeaturedArticles.map((article) => (
            <Card
              title={article.data.title}
              description={article.data.description}
              image={article.data.image}
              url={`/article/${article.slug}`}
            />
          ))
        }
      </div>
    </Section>
    <Section title="All Articles">
      <div class="articles__list">
        {
          allArticles.map((article) => (
            <HorizontalCard
              title={article.data.title}
              description={article.data.description}
              image={article.data.image}
              tags={article.data.tags}
              date={article.data.date}
              url={`/article/${article.slug}`}
            />
          ))
        }
      </div>
    </Section>
  </main>
</Layout>
